specVersion: 0.0.2
description: The Verified Wallet is for issuers and investors of tokenized securities.
repository: https://github.com/verified-network/verified-graph
schema:
  file: schema.graphql
dataSources:
  - kind: ethereum/contract
    name: SecuritiesFactory
    network: base-sepolia
    source:
      address: "0x68497F1380f29b2C41Ca8Ff1Da3B5a3BD8327d4D"
      abi: SecuritiesFactory
      startBlock: 10908942
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: SecuritiesFactory\SecuritiesFactory.wasm
      entities:
        - Issuer
        - Token
        - Security
      abis:
        - name: SecuritiesFactory
          file: SecuritiesFactory\abis\SecuritiesFactory.json
        - name: Security
          file: SecuritiesFactory\abis\Security.json
      eventHandlers:
        - event: securitiesAdded(indexed
            address,bytes32,address,bytes32,address,bool,address,bytes32[],bytes32)
          handler: handleSecurityCreated
  - kind: ethereum/contract
    name: Client
    network: base-sepolia
    source:
      address: "0x266d35A820B8e7f1CcAf7f14A24eC2232aE3D010"
      abi: Client
      startBlock: 10908938
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: Client\Client.wasm
      entities:
        - Manager
        - User
      abis:
        - name: Client
          file: Client\abis\Client.json
      eventHandlers:
        - event: ManagerAdded(address,indexed address,bytes32,bytes32,bytes32)
          handler: handleManagerCreated
        - event: ManagerRemoved(address,indexed address,bytes32,bytes32)
          handler: handleManagerRemoved
        - event: UserAdded(address,bytes32,bytes32,bytes32,uint256)
          handler: handleUserCreated
  - kind: ethereum/contract
    name: Factory
    network: base-sepolia
    source:
      address: "0x1021A1474dC1630E5781B1676Def04fF7f11Cc0b"
      abi: Factory
      startBlock: 10810847
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: SecuritiesFactory\SecuritiesFactory.wasm
      entities:
        - Token
      abis:
        - name: Factory
          file: Factory\abis\Factory.json
      eventHandlers:
        - event: CashIssuerCreated(indexed address,bytes32,bytes32)
          handler: handleCashCreated
        - event: BondIssuerCreated(indexed address,bytes32,bytes32)
          handler: handleBondCreated
        - event: TokenCreated(indexed address,bytes32,bytes32)
          handler: handleBondTokenCreated
  - kind: ethereum/contract
    name: VerifiedMarkets
    network: base-sepolia
    source:
      address: "0x7fB634f4C3530a35899c2238673342A8af707cD4"
      abi: VerifiedMarkets
      startBlock: 11179559
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      file: VerifiedMarkets\VerifiedMarkets.wasm
      entities:
        - RWA
        - Collateral
        - CollaterizedLoan
        - CollaterizedLoanRepayment
      abis:
        - name: VerifiedMarkets
          file: VerifiedMarkets\abis\VerifiedMarkets.json
      eventHandlers:
        - event: NewRWA(indexed address,indexed address,address,uint256,string,uint256)
          handler: handleNewRWA
        - event: PostedCollateral(indexed address,indexed address,address,uint256)
          handler: handleCollateral
        - event: Borrowed(indexed address,indexed address,uint256)
          handler: handleBorrowing
        - event: Repaid(indexed address,indexed address,uint256)
          handler: handleRepayment
templates:
  - kind: ethereum/contract
    name: Security
    network: base-sepolia
    source:
      abi: Security
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - Security
        - Resolutions
        - Snapshots
      abis:
        - name: Security
          file: Security\abis\Security.json
        - name: Snapshot
          file: Security\abis\Snapshot.json
        - name: CorporateActions
          file: Security\abis\CorporateActions.json
      eventHandlers:
        - event: Resolution(indexed address,uint256,string,bool)
          handler: handleResolutions
        - event: SnapshotSchedule(indexed address,uint256,uint256)
          handler: handleSchedulingSnapshot
        - event: SnapshotUnschedule(indexed address,uint256)
          handler: handleUnschedulingSnapshot
      file: templates\Security\Security.wasm
  - kind: ethereum/contract
    name: Cash
    network: base-sepolia
    source:
      abi: Cash
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - User
        - CashIssues
        - CashDeposited
        - CashRedemptions
        - CashTransfers
        - Currency
      abis:
        - name: Cash
          file: Cash\abis\Cash.json
      eventHandlers:
        - event: CashIssued(indexed address,bytes32,uint256,uint256)
          handler: handleCashIssued
        - event: CashRedeemed(indexed address,bytes32,uint256,uint256,uint256)
          handler: handleCashRedeemed
        - event: CashDeposits(indexed address,bytes32,uint256)
          handler: handleCashDeposits
        - event: CashTransfer(indexed address,indexed address,bytes32,uint256,uint256)
          handler: handleCashTransfer
      file: templates\Cash\Cash.wasm
  - kind: ethereum/contract
    name: Bond
    network: base-sepolia
    source:
      abi: Bond
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - User
        - BondIssues
        - BondPurchases
        - BondRedemptions
        - BondIssueRequests
        - Currency
      abis:
        - name: Bond
          file: Bond\abis\Bond.json
      eventHandlers:
        - event: BondIssued(indexed address,address,bytes32,uint256,bytes32,uint256,uint256)
          handler: handleBondIssued
        - event: BondRedeemed(indexed address,address,uint256,bytes32,uint256,bytes32)
          handler: handleBondRedeemed
        - event: BondPurchased(indexed address,address,bytes32,uint256,bytes32,uint256,uint256)
          handler: handleBondPurchased
        - event: BondLiquidated(indexed address,address,uint256,bytes32,uint256,bytes32)
          handler: handleBondLiquidation
      file: templates\Bond\Bond.wasm
